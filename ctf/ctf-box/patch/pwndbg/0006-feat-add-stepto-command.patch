From 018f2366945c8b6715c5e0751327d2ad145d2996 Mon Sep 17 00:00:00 2001
From: ripples <564311873@qq.com>
Date: Tue, 3 Apr 2018 20:43:47 +0800
Subject: [PATCH 6/6] feat: add `stepto` command

---
 pwndbg/commands/next.py | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)

diff --git a/pwndbg/commands/next.py b/pwndbg/commands/next.py
index 75b3857..a9cfc3d 100644
--- a/pwndbg/commands/next.py
+++ b/pwndbg/commands/next.py
@@ -8,6 +8,8 @@ from __future__ import division
 from __future__ import print_function
 from __future__ import unicode_literals
 
+import gdb
+
 import pwndbg.commands
 import pwndbg.next
 
@@ -82,3 +84,20 @@ def nextsc(*args):
     Breaks at the next syscall.
     """
     next_syscall(*args)
+
+
+@pwndbg.commands.Command
+@pwndbg.commands.OnlyWhenRunning
+def stepto(address, *args):
+    """Step to certain address"""
+    address = pwndbg.commands.fix(address)
+    if address is not None:
+        gdb.Breakpoint("*%#x" % int(address), internal=True, temporary=True)
+        gdb.execute('continue', from_tty=False, to_string=True)
+
+
+@pwndbg.commands.Command
+@pwndbg.commands.OnlyWhenRunning
+def st(*args):
+    """Alias for stepto"""
+    stepto(*args)
-- 
2.17.0

